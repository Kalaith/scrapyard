<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, height=720, initial-scale=1.0">
    <title>Scrapyard Planet | Web Hatchery Games</title>
    <link rel="stylesheet" href="../shared.css">
    <style>
        /* Game-specific canvas styles for Macroquad */
        .game-container canvas {
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }
    </style>
</head>

<body>
    <div class="game-page">
        <header class="game-header">
            <h1>üöÄ Scrapyard Planet</h1>
            <a href="../" class="back-link">‚Üê All Games</a>
        </header>

        <!-- Game Canvas -->
        <div class="game-container" id="game-container">
            <div class="loading-overlay" id="loading">
                <div class="loading-spinner"></div>
                <p>Loading game...</p>
            </div>
            <canvas id="glcanvas" tabindex="1"></canvas>
        </div>

        <!-- Controls Bar -->
        <div class="game-controls">
            <button class="btn btn-secondary btn-icon" onclick="toggleFullscreen()" title="Fullscreen">‚õ∂</button>
            <button class="btn btn-secondary" onclick="focusGame()">üéÆ Focus Game</button>
            <span style="flex: 1;"></span>
            <span style="color: var(--text-muted); font-size: 0.85rem;">Click the game canvas to start, then use
                keyboard controls</span>
        </div>

        <!-- Info Section -->
        <div class="game-info">
            <div class="info-main">
                <section class="info-section">
                    <h2>About This Game</h2>
                    <p>
                        <strong>Scrapyard Planet</strong> is a tower defense game where players act as scrapyard
                        operators
                        repairing crashed spaceships on a hostile planet. Rogue nanomachines attack anything generating
                        power,
                        forcing players to balance ship repairs with defense.
                    </p>
                    <p>
                        Destroyed nanomachines provide materials for further repairs, creating a tense risk-reward
                        cycle.
                        The goal is to restore the ship's power core, activate the engines, and escape before being
                        overrun.
                    </p>
                </section>

                <section class="info-section" style="margin-top: 1rem;">
                    <h2>Controls</h2>
                    <ul class="controls-list">
                        <li><kbd>WASD</kbd><span>Move character (Interior View)</span></li>
                        <li><kbd>Tab</kbd><span>Toggle Interior/Exterior views</span></li>
                        <li><kbd>E</kbd><span>Interact / Repair modules</span></li>
                        <li><kbd>Hold E</kbd><span>Gather scrap from piles</span></li>
                        <li><kbd>P</kbd><span>Pause Game</span></li>
                        <li><kbd>Esc</kbd><span>Return to Menu</span></li>
                    </ul>
                </section>
            </div>

            <aside class="game-sidebar">
                <div class="sidebar-section">
                    <h3>Status</h3>
                    <span class="status-badge playable">‚úì Playable</span>
                </div>

                <div class="sidebar-section">
                    <h3>Details</h3>
                    <ul class="meta-list">
                        <li><span class="label">Genre</span><span class="value">Tower Defense</span></li>
                        <li><span class="label">Engine</span><span class="value">Macroquad</span></li>
                        <li><span class="label">Platform</span><span class="value">Browser, Windows</span></li>
                    </ul>
                </div>

                <div class="sidebar-section">
                    <h3>Downloads</h3>
                    <a href="#" class="btn btn-secondary" style="width: 100%; justify-content: center;">
                        üì• Windows Build
                    </a>
                </div>
            </aside>
        </div>

        <footer class="game-footer">
            <p>Built with Rust + Macroquad | <a href="/">Web Hatchery</a></p>
        </footer>
    </div>

    <!-- Macroquad JS Bundle -->
    <script src="mq_js_bundle.js"></script>
    <script>
        // Hide loading overlay once game starts
        document.getElementById('loading').style.display = 'none';

        // Load the WASM game
        load("scrapyard.wasm");

        function toggleFullscreen() {
            const container = document.getElementById('game-container');
            if (!document.fullscreenElement) {
                container.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        function focusGame() {
            document.getElementById('glcanvas').focus();
        }
    </script>
</body>

</html>